<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location-Based Hint</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
        }
        p {
            font-size: 1.2em;
        }
        footer {
            margin-top: 50px;
            font-size: 1em;
            color: gray;
        }
    </style>
</head>
<body>
    <h1>Verify Your Location and Previous Hint</h1>
    <p id="status">Checking your location...</p>
    <p id="hint" style="font-weight: bold; font-size: 20px;"></p>

    <script>
        // Target location (latitude and longitude)
        const targetLatitude = 19.1245137; // Example: Latitude
        const targetLongitude = 72.9106086; // Example: Longitude
        const thresholdDistance = 0.05; // Distance threshold in kilometers (50 meters)

        // Previous hint to verify
        const correctPreviousHint = "A professor believed that every discovery began with curiosity. His journey started in a place where young minds first explore the vastness of knowledge.The first fragment lies hidden where energy thrives, and paths converge. An excerpt from his journal reads:\nThe first step on the journey lies where the hum of youthful voices fills the air, and chariots of yellow stand still, waiting for the next journey to begin. The keeper of all arrivals and departures watches over this place, and it is here where the path to the next fragment begins. To proceed, one must mark their place in the journey.";

        // Function to calculate the distance between two coordinates
        function getDistance(lat1, lon1, lat2, lon2) {
            const toRad = (value) => (value * Math.PI) / 180;
            const R = 6371; // Earth's radius in kilometers
            const dLat = toRad(lat2 - lat1);
            const dLon = toRad(lon2 - lon1);
            const a =
                Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *
                Math.sin(dLon / 2) * Math.sin(dLon / 2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            return R * c; // Distance in kilometers
        }

        // Prompt user for their previous hint
        const userPreviousHint = prompt("Enter your previous hint:");

        if (userPreviousHint === correctPreviousHint) {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const userLatitude = position.coords.latitude;
                        const userLongitude = position.coords.longitude;
                        const distance = getDistance(userLatitude, userLongitude, targetLatitude, targetLongitude);

                        if (distance <= thresholdDistance) {
                            document.getElementById("status").innerText = "Location matched!";
                            document.getElementById("hint").innerText = "üéâ YOUR HINT:\nMeet me at 9:58 across from fleeting strides, where stories are brewed over steaming cups. Beyond this refuge lies a path where time bows to the swift, yet whispers of its conquest are known only to those who traverse its fleeting embrace. It is a place where ambition measures itself not in years but in moments, and the horizon stretches further with every fleeting second. Where does this pursuit linger, leaving its invisible mark?";

                            document.getElementById("status").innerText = "Location mismatch!";
                            document.getElementById("hint").innerText = "‚ùå You are not at the correct location. Please try again.";
                        }
                    },
                    (error) => {
                        document.getElementById("status").innerText = "Unable to get your location. Please enable GPS and try again.";
                    }
                );
            } else {
                document.getElementById("status").innerText = "Geolocation is not supported by your browser.";
            }
        } else {
            document.getElementById("status").innerText = "Incorrect previous hint!";
            document.getElementById("hint").innerText = "‚ùå Please check your previous hint and try again.";
        }
    </script>

    <footer>
        Designed with ‚ù§Ô∏è by SARC team :)
    </footer>
</body>
</html>
